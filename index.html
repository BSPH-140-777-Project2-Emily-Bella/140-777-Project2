<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Emily Potts (epotts@jh.edu / epotts5) and Bella Satpathy-Horton (ghorton2@jh.edu / ghorton2)">
<meta name="dcterms.date" content="2024-11-10">
<meta name="description" content="Practicing functional programming and data collection paradigms">

<title>Project 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project 2</h1>
</div>

<div>
  <div class="description">
    Practicing functional programming and data collection paradigms
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Emily Potts (epotts@jh.edu / epotts5) and Bella Satpathy-Horton (ghorton2@jh.edu / ghorton2) </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Department of Biostatistics, Johns Hopkins
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 10, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="background" class="level1">
<h1>Background</h1>
<p><strong>Due date: November 15 at 11:59pm</strong></p>
<p>The goal of this assignment is to practice some of the skills we have been learning about in class around data collection paradigms and functional programming.</p>
<section id="to-submit-your-project" class="level3">
<h3 class="anchored" data-anchor-id="to-submit-your-project">To submit your project</h3>
<p>You need to create a private GitHub Classroom repository (only one per group) for you and your partner, which will be posted in CoursePlus. This creates an empty GitHub repository. You need to show all your code and submit both the <code>.qmd</code> file and the rendered HTML file. Please include section headers for each of the components below. All plots should have titles, subtitles, captions, and human-understandable axis labels. The TAs will grade the contents in the GitHub Classroom repo by cloning the repo and checking for all the things described below.</p>
<p>Because you will work with a partner, <strong>please be sure to include the names, emails, and JHED IDs for both individuals in your submitted work</strong>.</p>
</section>
</section>
<section id="part-1" class="level1">
<h1>Part 1</h1>
<p>Here, you and your partner will practice using a API and making data visualizations.</p>
<p>The API we will use is <code>tidycensus</code> (<a href="https://walker-data.com/tidycensus" class="uri">https://walker-data.com/tidycensus</a>), which is an R package that allows users to interface with a select number of the US Census Bureau’s data APIs and return tidyverse-ready data frames, optionally with simple feature geometry included.</p>
<p>The goal of this part is to create a set of data visualizations using the US Census Bureau’s data.</p>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>To use this API, you must obtain an API key, which can be found at the top of this page:</p>
<ul>
<li><a href="https://walker-data.com/tidycensus/articles/basic-usage" class="uri">https://walker-data.com/tidycensus/articles/basic-usage</a></li>
</ul>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>When you use an API, you want to figure out the data you want to extract and then save it locally so that you are not using the API each time you knit or render your data analysis.</p>
<p>Most APIs have limits on the number of times you can ping it in a given hour and your IP address can be blocked if you try to ping it too many times within a short time.</p>
<p>Therefore, it is strongly suggested that you create a new folder called <code>data</code> locally and save the output from extracting data from the <code>tidycensus</code> API. In this way, you can read the data in locally each time you knit/render the document, rather than continue to pull data from the API each time you knit/render the document.</p>
</div>
</div>
<ol type="1">
<li>Choose a question to investigate. Describe what is the question you aim to answer with the data and what you want to visualize.</li>
</ol>
<p>Education levels in urban vs rural PA?</p>
<ol start="2" type="1">
<li>Extract data from the <code>tidycensus</code> API. Use at least three different calls to the <code>tidycensus</code> API to extract out different datasets. For example, these could be across years, locations, or variables.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">census_api_key</span>(<span class="st">"7d55de6317ef97afe80c744aab78d1b75e2d1970"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>To install your API key for use in future sessions, run this function with `install = TRUE`.</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Clean the data. Include some form of data wrangling and data visualization using packages such as <code>dplyr</code> or <code>tidyr</code>. Other packages that might be helpful to you include <code>lubridate</code>, <code>stringr</code>, and <code>forcats</code>. You <strong>must use at least two functions from <code>purrr</code></strong>.</li>
</ol>
<p>https://walker-data.com/census-r/an-introduction-to-tidycensus.html might be helpful</p>
<ol start="4" type="1">
<li><p>Visualize the data. Create data visualizations of your choice. However, your analysis should include at least three plots with you using at least two different <code>geom_*()</code> functions from <code>ggplot2</code> (or another package with <code>geom_*()</code> functions).</p></li>
<li><p>Report your findings. Provide a paragraph summarizing your methods and key findings. Include any limitations or potential biases in pulling data from the API or the analysis. Be sure to comment and organize your code so is easy to understand what you are doing.</p></li>
</ol>
</section>
<section id="part-2" class="level1">
<h1>Part 2</h1>
<p>In this part, you and your partner will use the <code>rvest</code> package to scrape data from a website, wrangle and analyze the data, and summarize your findings.</p>
<ol type="1">
<li>Choose a website to scrape. Select a website with structured data in HTML tables or well-defined sections. Some examples could include:</li>
</ol>
<p>IMDb scraping genre, duration, movie titles, reviews, ratings, and release years</p>
<ol start="2" type="1">
<li>Extract data with <code>rvest</code>. Here, you will want to identify the specific HTML elements or CSS selectors containing the data. Then, use <code>rvest</code> functions like <code>read_html()</code>, <code>html_nodes()</code>, and <code>html_text()</code> or <code>html_table()</code> to retrieve the data.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'rvest'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following object is masked from 'package:readr':

    guess_encoding</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the URLs and their corresponding genres</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>urls <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www.imdb.com/chart/moviemeter/?ref_=nv_mv_mpm&amp;sort=rank%2Casc&amp;genres=sci-fi"</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www.imdb.com/chart/moviemeter/?ref_=nv_mv_mpm&amp;sort=rank%2Casc&amp;genres=adventure"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">"https://www.imdb.com/chart/moviemeter/?ref_=nv_mv_mpm&amp;sort=rank%2Casc&amp;genres=mystery"</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>genres <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Sci-Fi"</span>, <span class="st">"Adventure"</span>, <span class="st">"Mystery"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize an empty data frame to store results</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>imdb_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">Title =</span> <span class="fu">character</span>(),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">Duration =</span> <span class="fu">character</span>(),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">Rating =</span> <span class="fu">character</span>(),</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">Reviews =</span> <span class="fu">character</span>(),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">Year =</span> <span class="fu">character</span>(),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">Genre =</span> <span class="fu">character</span>(),</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Loop through each URL and genre</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq_along</span>(urls)) {</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Scrape the webpage</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>  url <span class="ot">&lt;-</span> urls[i]</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>  genre <span class="ot">&lt;-</span> genres[i]</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  webpage <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url)</span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract movie titles</span></span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>  titles <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".with-margin .ipc-title__text"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract movie durations</span></span>
<span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>  durations <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".cli-title-metadata-item:nth-child(2)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract movie ratings</span></span>
<span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>  ratings <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".ipc-rating-star--rating"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract number of reviews</span></span>
<span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>  reviews <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".ipc-rating-star--voteCount"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Extract year</span></span>
<span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a>  years <span class="ot">&lt;-</span> webpage <span class="sc">%&gt;%</span></span>
<span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_nodes</span>(<span class="st">".cli-title-metadata-item:nth-child(1)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">html_text</span>(<span class="at">trim =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Ensure all vectors have the same length by padding with NA</span></span>
<span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>  max_length <span class="ot">&lt;-</span> <span class="fu">max</span>(<span class="fu">length</span>(titles), <span class="fu">length</span>(durations), <span class="fu">length</span>(ratings), <span class="fu">length</span>(reviews), <span class="fu">length</span>(years))</span>
<span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>  titles <span class="ot">&lt;-</span> <span class="fu">c</span>(titles, <span class="fu">rep</span>(<span class="cn">NA</span>, max_length <span class="sc">-</span> <span class="fu">length</span>(titles)))</span>
<span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>  durations <span class="ot">&lt;-</span> <span class="fu">c</span>(durations, <span class="fu">rep</span>(<span class="cn">NA</span>, max_length <span class="sc">-</span> <span class="fu">length</span>(durations)))</span>
<span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>  ratings <span class="ot">&lt;-</span> <span class="fu">c</span>(ratings, <span class="fu">rep</span>(<span class="cn">NA</span>, max_length <span class="sc">-</span> <span class="fu">length</span>(ratings)))</span>
<span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a>  reviews <span class="ot">&lt;-</span> <span class="fu">c</span>(reviews, <span class="fu">rep</span>(<span class="cn">NA</span>, max_length <span class="sc">-</span> <span class="fu">length</span>(reviews)))</span>
<span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a>  years <span class="ot">&lt;-</span> <span class="fu">c</span>(years, <span class="fu">rep</span>(<span class="cn">NA</span>, max_length <span class="sc">-</span> <span class="fu">length</span>(years)))</span>
<span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Combine the data into a temporary data frame with Genre</span></span>
<span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>  temp_data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">Title =</span> titles,</span>
<span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">Duration =</span> durations,</span>
<span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>    <span class="at">Rating =</span> ratings,</span>
<span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>    <span class="at">Reviews =</span> reviews,</span>
<span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    <span class="at">Year =</span> years,</span>
<span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">Genre =</span> <span class="fu">rep</span>(genre, max_length), <span class="co"># Add genre label here</span></span>
<span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Append the temporary data frame to the main data frame</span></span>
<span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>  imdb_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(imdb_data, temp_data)</span>
<span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the combined data with genre labels</span></span>
<span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(imdb_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                               Title Duration Rating Reviews
1                              Venom: The Last Dance   1h 50m    6.2   (39K)
2                                           Time Cut   1h 30m    5.0   (12K)
3             Apocalypse Z: The Beginning of the End   1h 52m    6.1  (9.6K)
4                                     The Wild Robot   1h 42m    8.3   (75K)
5                               Deadpool &amp; Wolverine    2h 8m    7.7  (372K)
6                                     Alien: Romulus   1h 59m    7.2  (160K)
7                                   Transformers One   1h 44m    7.7   (29K)
8                                       Interstellar   2h 49m    8.7  (2.2M)
9                                    Despicable Me 4   1h 34m    6.2   (50K)
10                                             Venom   1h 52m    6.6  (559K)
11                                It's What's Inside   1h 43m    6.6   (27K)
12                       Venom: Let There Be Carnage   1h 37m    5.9  (274K)
13                                    Dune: Part Two   2h 46m    8.5  (543K)
14                                      Subservience   1h 46m    5.2  (7.8K)
15                                       Borderlands   1h 41m    4.6   (33K)
16                                    Predestination   1h 37m    7.4  (314K)
17                                       Megalopolis   2h 18m    5.0   (20K)
18                                    V for Vendetta   2h 12m    8.1  (1.2M)
19                           Furiosa: A Mad Max Saga   2h 28m    7.5  (228K)
20                                       Poor Things   2h 21m    7.8  (312K)
21                                         Idiocracy   1h 24m    6.5  (192K)
22                             Venom: The Last Dance   1h 50m    6.2   (39K)
23                                      Gladiator II   2h 28m    7.0  (6.4K)
24                                           Red One    2h 3m    7.0   (16K)
25                              Deadpool &amp; Wolverine    2h 8m    7.7  (372K)
26                                         Gladiator   2h 35m    8.5  (1.7M)
27                         The Count of Monte-Cristo   2h 58m    7.8   (13K)
28                                  Transformers One   1h 44m    7.7   (29K)
29                                      Interstellar   2h 49m    8.7  (2.2M)
30                                         Civil War   1h 49m    7.0  (191K)
31                                          Twisters    2h 2m    6.6  (119K)
32                                   Despicable Me 4   1h 34m    6.2   (50K)
33                                             Venom   1h 52m    6.6  (559K)
34                   The Best Christmas Pageant Ever   1h 39m    7.4   (826)
35                                      Inside Out 2   1h 36m    7.6  (175K)
36                                Paddington in Peru   1h 46m    6.9  (1.5K)
37             Harry Potter and the Sorcerer's Stone   2h 32m    7.6  (879K)
38                                           Moana 2   1h 40m    8.5  (543K)
39                                    Dune: Part Two   2h 46m    4.6   (33K)
40                                       Borderlands   1h 41m    7.5  (228K)
41                           Furiosa: A Mad Max Saga   2h 28m    8.9  (2.1M)
42 The Lord of the Rings: The Fellowship of the Ring   2h 58m    6.5  (192K)
43                                         Idiocracy   1h 24m   &lt;NA&gt;    &lt;NA&gt;
44                                 Woman of the Hour   1h 35m    6.6   (36K)
45                                          Time Cut   1h 30m    5.0   (12K)
46                                           Red One    2h 3m    7.0   (16K)
47                                              Trap   1h 45m    5.9  (102K)
48                                           Smile 2    2h 7m    7.2   (32K)
49                                        The Batman   2h 56m    7.8  (834K)
50                                        Caddo Lake   1h 39m    6.9   (26K)
51                                         Nosferatu   2h 12m    6.5  (197K)
52                                                 X   1h 45m    6.5   (54K)
53                                       Blink Twice   1h 42m    6.5  (194K)
54                                             Smile   1h 55m    7.4   (826)
55                   The Best Christmas Pageant Ever   1h 39m    6.6   (27K)
56                                It's What's Inside   1h 43m    6.9  (1.5K)
57                                Paddington in Peru   1h 46m    7.4  (406K)
58                                            Scream   1h 51m    6.3  (1.2K)
59                                      Pedro Páramo   2h 10m    6.8   (58K)
60                                          Do Patti    2h 6m    5.4   (699)
61                                        Absolution   1h 52m   &lt;NA&gt;    &lt;NA&gt;
   Year     Genre
1  2024    Sci-Fi
2  2024    Sci-Fi
3  2024    Sci-Fi
4  2024    Sci-Fi
5  2024    Sci-Fi
6  2024    Sci-Fi
7  2024    Sci-Fi
8  2014    Sci-Fi
9  2024    Sci-Fi
10 2018    Sci-Fi
11 2024    Sci-Fi
12 2021    Sci-Fi
13 2024    Sci-Fi
14 2024    Sci-Fi
15 2024    Sci-Fi
16 2014    Sci-Fi
17 2024    Sci-Fi
18 2005    Sci-Fi
19 2024    Sci-Fi
20 2023    Sci-Fi
21 2006    Sci-Fi
22 2024 Adventure
23 2024 Adventure
24 2024 Adventure
25 2024 Adventure
26 2000 Adventure
27 2024 Adventure
28 2024 Adventure
29 2014 Adventure
30 2024 Adventure
31 2024 Adventure
32 2024 Adventure
33 2018 Adventure
34 2024 Adventure
35 2024 Adventure
36 2024 Adventure
37 2001 Adventure
38 2024 Adventure
39 2024 Adventure
40 2024 Adventure
41 2024 Adventure
42 2001 Adventure
43 2006 Adventure
44 2023   Mystery
45 2024   Mystery
46 2024   Mystery
47 2024   Mystery
48 2024   Mystery
49 2022   Mystery
50 2024   Mystery
51 2024   Mystery
52 2022   Mystery
53 2024   Mystery
54 2022   Mystery
55 2024   Mystery
56 2024   Mystery
57 2024   Mystery
58 1996   Mystery
59 2024   Mystery
60 2024   Mystery
61 2024   Mystery</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Clean the data. Next, perform some basic wrangling, such as remove extra whitespace, handle missing values, and convert data types as needed. You might find the functions from <code>dplyr</code> or <code>tidyr</code> useful for any additional transformations, such as renaming columns, filtering rows, or creating new variables.</li>
</ol>
<p>convert Duration from to Duration in minutes and Reviews from (39K) to 39000.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert Duration and Reviews</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>imdb_data <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Reviews =</span> <span class="fu">gsub</span>(<span class="st">"^</span><span class="sc">\\</span><span class="st">(|</span><span class="sc">\\</span><span class="st">)$"</span>, <span class="st">""</span>, Reviews)) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Reviews =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+K$"</span>, Reviews),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste0</span>(<span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, <span class="fu">sub</span>(<span class="st">"K$"</span>, <span class="st">""</span>, Reviews)), <span class="st">"00"</span>),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>                          Reviews)) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Reviews =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"K$"</span>, Reviews),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste0</span>(<span class="fu">sub</span>(<span class="st">"K$"</span>, <span class="st">""</span>, Reviews), <span class="st">"000"</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                          Reviews)) <span class="sc">%&gt;%</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Reviews =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.</span><span class="sc">\\</span><span class="st">d+M$"</span>, Reviews),</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste0</span>(<span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>, <span class="st">""</span>, <span class="fu">sub</span>(<span class="st">"M$"</span>, <span class="st">""</span>, Reviews)), <span class="st">"00000"</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>                          Reviews)) <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Duration, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Hours"</span>, <span class="st">"Minutes"</span>), <span class="at">sep =</span> <span class="st">"h "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Hours =</span> <span class="fu">as.numeric</span>(Hours),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">Minutes =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">"m"</span>, <span class="st">""</span>, Minutes))) <span class="sc">%&gt;%</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(Duration, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"Hours"</span>, <span class="st">"Minutes"</span>), <span class="at">sep =</span> <span class="st">"h "</span>, <span class="at">remove =</span> <span class="cn">FALSE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Hours =</span> <span class="fu">as.numeric</span>(Hours),</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">Minutes =</span> <span class="fu">as.numeric</span>(<span class="fu">sub</span>(<span class="st">"m"</span>, <span class="st">""</span>, Minutes)),</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">Minutes2 =</span> Hours <span class="sc">*</span> <span class="dv">60</span>,</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">Duration =</span> Minutes <span class="sc">+</span> Minutes2) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Hours, <span class="sc">-</span>Minutes, <span class="sc">-</span>Minutes2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                               Title Duration Rating Reviews
1                              Venom: The Last Dance      110    6.2   39000
2                                           Time Cut       90    5.0   12000
3             Apocalypse Z: The Beginning of the End      112    6.1    9600
4                                     The Wild Robot      102    8.3   75000
5                               Deadpool &amp; Wolverine      128    7.7  372000
6                                     Alien: Romulus      119    7.2  160000
7                                   Transformers One      104    7.7   29000
8                                       Interstellar      169    8.7 2200000
9                                    Despicable Me 4       94    6.2   50000
10                                             Venom      112    6.6  559000
11                                It's What's Inside      103    6.6   27000
12                       Venom: Let There Be Carnage       97    5.9  274000
13                                    Dune: Part Two      166    8.5  543000
14                                      Subservience      106    5.2    7800
15                                       Borderlands      101    4.6   33000
16                                    Predestination       97    7.4  314000
17                                       Megalopolis      138    5.0   20000
18                                    V for Vendetta      132    8.1 1200000
19                           Furiosa: A Mad Max Saga      148    7.5  228000
20                                       Poor Things      141    7.8  312000
21                                         Idiocracy       84    6.5  192000
22                             Venom: The Last Dance      110    6.2   39000
23                                      Gladiator II      148    7.0    6400
24                                           Red One      123    7.0   16000
25                              Deadpool &amp; Wolverine      128    7.7  372000
26                                         Gladiator      155    8.5 1700000
27                         The Count of Monte-Cristo      178    7.8   13000
28                                  Transformers One      104    7.7   29000
29                                      Interstellar      169    8.7 2200000
30                                         Civil War      109    7.0  191000
31                                          Twisters      122    6.6  119000
32                                   Despicable Me 4       94    6.2   50000
33                                             Venom      112    6.6  559000
34                   The Best Christmas Pageant Ever       99    7.4     826
35                                      Inside Out 2       96    7.6  175000
36                                Paddington in Peru      106    6.9    1500
37             Harry Potter and the Sorcerer's Stone      152    7.6  879000
38                                           Moana 2      100    8.5  543000
39                                    Dune: Part Two      166    4.6   33000
40                                       Borderlands      101    7.5  228000
41                           Furiosa: A Mad Max Saga      148    8.9 2100000
42 The Lord of the Rings: The Fellowship of the Ring      178    6.5  192000
43                                         Idiocracy       84   &lt;NA&gt;    &lt;NA&gt;
44                                 Woman of the Hour       95    6.6   36000
45                                          Time Cut       90    5.0   12000
46                                           Red One      123    7.0   16000
47                                              Trap      105    5.9  102000
48                                           Smile 2      127    7.2   32000
49                                        The Batman      176    7.8  834000
50                                        Caddo Lake       99    6.9   26000
51                                         Nosferatu      132    6.5  197000
52                                                 X      105    6.5   54000
53                                       Blink Twice      102    6.5  194000
54                                             Smile      115    7.4     826
55                   The Best Christmas Pageant Ever       99    6.6   27000
56                                It's What's Inside      103    6.9    1500
57                                Paddington in Peru      106    7.4  406000
58                                            Scream      111    6.3    1200
59                                      Pedro Páramo      130    6.8   58000
60                                          Do Patti      126    5.4     699
61                                        Absolution      112   &lt;NA&gt;    &lt;NA&gt;
   Year     Genre
1  2024    Sci-Fi
2  2024    Sci-Fi
3  2024    Sci-Fi
4  2024    Sci-Fi
5  2024    Sci-Fi
6  2024    Sci-Fi
7  2024    Sci-Fi
8  2014    Sci-Fi
9  2024    Sci-Fi
10 2018    Sci-Fi
11 2024    Sci-Fi
12 2021    Sci-Fi
13 2024    Sci-Fi
14 2024    Sci-Fi
15 2024    Sci-Fi
16 2014    Sci-Fi
17 2024    Sci-Fi
18 2005    Sci-Fi
19 2024    Sci-Fi
20 2023    Sci-Fi
21 2006    Sci-Fi
22 2024 Adventure
23 2024 Adventure
24 2024 Adventure
25 2024 Adventure
26 2000 Adventure
27 2024 Adventure
28 2024 Adventure
29 2014 Adventure
30 2024 Adventure
31 2024 Adventure
32 2024 Adventure
33 2018 Adventure
34 2024 Adventure
35 2024 Adventure
36 2024 Adventure
37 2001 Adventure
38 2024 Adventure
39 2024 Adventure
40 2024 Adventure
41 2024 Adventure
42 2001 Adventure
43 2006 Adventure
44 2023   Mystery
45 2024   Mystery
46 2024   Mystery
47 2024   Mystery
48 2024   Mystery
49 2022   Mystery
50 2024   Mystery
51 2024   Mystery
52 2022   Mystery
53 2024   Mystery
54 2022   Mystery
55 2024   Mystery
56 2024   Mystery
57 2024   Mystery
58 1996   Mystery
59 2024   Mystery
60 2024   Mystery
61 2024   Mystery</code></pre>
</div>
</div>
<ol start="4" type="1">
<li><p>Analyze the data. Perform a simple analysis of your choice. For example, you could</p>
<ul>
<li>Count how many times specific words or themes appear.</li>
<li>Create a summary statistic (e.g., average rating, job salary, team win percentage).</li>
<li>Create a data visualization (e.g., bar chart, histogram) of an interesting metric.</li>
</ul></li>
<li><p>Report your findings. Provide a paragraph summarizing your methods and key findings. Include any limitations or potential biases in your scraping or analysis. Be sure to comment and organize your code so is easy to understand what you are doing.</p></li>
</ol>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>